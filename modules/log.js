/*** Generated by streamline 0.4.11 (callbacks) - DO NOT EDIT ***/ var __rt=require('streamline/lib/callbacks/runtime').runtime(__filename),__func=__rt.__func; (function() {
  var BaseModule, Log, LogDB, loggly, __bind = function(fn, me) {
    return function() { return fn.apply(me, arguments); };
  }, __hasProp = { }.hasOwnProperty, __extends = function(child, parent) {
    for (var key in parent) { if (__hasProp.call(parent, key)) { child[key] = parent[key]; }; }; function ctor() { this.constructor = child; }; ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  BaseModule = require("./baseModule");

  LogDB = require("../DB/LogDB");

  loggly = require("loggly");

  module.exports = Log = (function(_super) {
    __extends(Log, _super);

    function Log(user) {
      this.logDebug = __bind(this.logDebug, this);
      this.logError = __bind(this.logError, this);
      this.logActivity = __bind(this.logActivity, this);
      this.saveLogToDB = __bind(this.saveLogToDB, this);
      var config;
      Log.__super__.constructor.call(this, user);
      this.currentStage = 3;
      config = {
        auth: {
          username: "dorgarbash",
          password: "dorIsGarbash1" },

        subdomain: "knownodes" };

      this.client = loggly.createClient(config); };


    Log.prototype.saveLogToDB = function(title, content) {
      return this.client.log("0bf69f08-e6f2-4c42-8f39-4b5a606c8c90", (("" + title) + ": ${content}")); };


    Log.prototype.logActivity = function Log_prototype_logActivity__1(title, content, _) { var __this = this; var __frame = { name: "Log_prototype_logActivity__1", line: 38 }; return __func(_, this, arguments, Log_prototype_logActivity__1, 2, __frame, function __$Log_prototype_logActivity__1() {
        title = ("Activity: " + title);
        console.log(((title + "-") + content));
        if ((__this.currentStage > 2)) {
          return _(null, __this.saveLogToDB(title, content)); } ; _(); }); };



    Log.prototype.logError = function Log_prototype_logError__2(title, content, _) { var __this = this; var __frame = { name: "Log_prototype_logError__2", line: 46 }; return __func(_, this, arguments, Log_prototype_logError__2, 2, __frame, function __$Log_prototype_logError__2() {
        title = ("ERROR: " + title);
        console.log(((title + "-") + content));
        return _(null, __this.saveLogToDB(title, content)); }); };


    Log.prototype.logDebug = function Log_prototype_logDebug__3(title, content, _) { var __this = this; var __frame = { name: "Log_prototype_logDebug__3", line: 52 }; return __func(_, this, arguments, Log_prototype_logDebug__3, 2, __frame, function __$Log_prototype_logDebug__3() {
        title = ("DEBUG: " + title);
        console.log(((title + "-") + content));
        if ((__this.currentStage > 1)) {
          return _(null, __this.saveLogToDB(title, content)); } ; _(); }); };



    return Log;

  })(BaseModule);

}).call(this);